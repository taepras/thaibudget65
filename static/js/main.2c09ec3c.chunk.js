(this.webpackJsonpthaibudget65=this.webpackJsonpthaibudget65||[]).push([[0],{143:function(t,e,n){},145:function(t,e,n){},153:function(t,e,n){"use strict";n.r(e);var i,r=n(0),a=n.n(r),c=n(46),o=n.n(c),l=(n(143),n(23)),s=n(24),u=n(32),d=n(13),f=n(8),h=n(2),v=(n.p,n(145),n(52)),b=n(47),j=n(48),g=n(31).a.div(i||(i=Object(j.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n"]))),p=n(1);var O=function(t){var e=t.data,n=void 0===e?[]:e,i=t.isLoading,a=void 0===i||i,c=t.padding,o=void 0===c?16:c,l=t.filters,u=void 0===l?["all"]:l,j=(t.setFilters,t.hierarchyBy),O=void 0===j?[]:j,x=Object(b.a)({onResize:function(t){var e=t.observe,n=t.unobserve;t.w,t.h,t.entr;n(),e()}}),y=x.observe,m=(x.unobserve,x.width),T=x.height,I=(x.entry,Object(h.d)()),k=Object(r.useRef)(null),R=Object(r.useState)("treemap"),w=Object(d.a)(R,2),C=w[0],E=(w[1],Object(r.useMemo)((function(){console.log("filters",u);var t=Object(v.a)(),e=function(e){t=t.key((function(t){return t[O[e]]}))};for(var i in u)e(i);var r={key:"root",values:[{key:"all",values:t.rollup((function(t){return f.f(t,(function(t){return t.AMOUNT}))})).entries(n)}]},a=function(t){var e,n,i;r=null===(e=r)||void 0===e||null===(n=e.values)||void 0===n||null===(i=n.filter)||void 0===i?void 0:i.call(n,(function(e){return e.key===u[t]}))[0]};for(var c in u)a(c);return console.log("indata",r),r}),[n,u,O]));return Object(r.useEffect)((function(){if(k.current){console.log("nested",E);var t=k.current.clientHeight;console.log(t);var e=f.b(E,(function(t){return null===t||void 0===t?void 0:t.values})).sum((function(t){return null===t||void 0===t?void 0:t.value})).sort((function(t,e){return(null===e||void 0===e?void 0:e.value)-(null===t||void 0===t?void 0:t.value)})),n=(f.g().size([m-2*o,t-2*o]).padding(3)(e),f.e(k.current).select("g.chart")),i=(f.d().domain([0,f.c(e.leaves(),(function(t){return t.value}))]).range([0,m-2*o]),n.selectAll("g.treemap-piece").data(e.leaves(),(function(t){var e;return null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.key}))),r=i.enter().append("g").attr("class","treemap-piece");r.append("rect"),r.append("text").attr("class","text-name").attr("font-size","12px").attr("fill","white"),r.append("text").attr("class","text-value").attr("font-size","12px").attr("fill","white");var a=r.merge(i);"treemap"===C&&(a.on("click",null).on("click",(function(t,e){var n=e.x0,i=e.y0,r=(m-2*o)/(e.x1-e.x0),c=(T-2*o)/(e.y1-e.y0);a.transition().duration(300).attr("transform",(function(t){return"translate(".concat((t.x0-n)*r,",").concat((t.y0-i)*c,")")})),a.select("rect").transition().duration(300).attr("width",(function(t){return r*(t.x1-t.x0)})).attr("height",(function(t){return c*(t.y1-t.y0)})),setTimeout((function(){var t,n=[].concat(Object(s.a)(u),[null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.key]);I.push("".concat("/thaibudget65","/").concat(n.join("/")))}),300)})).attr("transform",(function(t){return"translate(".concat(t.x0,",").concat(t.y0,")")})).transition().duration(600).attr("opacity",1),a.select("rect").attr("rx",2).style("fill","DarkSlateBlue").attr("width",(function(t){return t.x1-t.x0})).attr("height",(function(t){return t.y1-t.y0})),a.select("text.text-name").attr("x",5).attr("y",8).attr("dominant-baseline","hanging").text((function(t){var e;return null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.key})),a.select("text.text-value").attr("x",5).attr("y",24).attr("fill-opacity",.7).attr("dominant-baseline","hanging").attr("opacity",1).text((function(t){return"".concat(t.value.toLocaleString()," \u0e1a\u0e32\u0e17")}))),i.exit().transition().delay(300).duration(600).attr("opacity",0).delay(300).remove()}}),[k,E,u,m,T,C,o,I]),Object(p.jsxs)("div",{ref:y,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",overflowY:"auto"},children:[a&&Object(p.jsx)(g,{style:{backgroundColor:"#000c",alignItems:"center",justifyContent:"center"},children:"Loading..."}),Object(p.jsx)("div",{style:{height:o,marginBottom:-o,background:"linear-gradient(#000f, #0000)",width:"100%",zIndex:1}}),Object(p.jsx)("svg",{ref:k,width:m,height:T,children:Object(p.jsx)("g",{transform:"translate(".concat(o,", ").concat(o,")"),className:"chart"})}),Object(p.jsx)("div",{style:{height:o,marginTop:-o,background:"linear-gradient(#0000, #000f)",width:"100%",zIndex:1}})]})},x=["MINISTRY","BUDGETARY_UNIT","BUDGET_PLAN","OUTPUT_PROJECT","CATEGORY_LV1","CATEGORY_LV2","CATEGORY_LV3","CATEGORY_LV4","CATEGORY_LV5","CATEGORY_LV6","ITEM_DESCRIPTION"];var y=function(){var t=Object(r.useState)([]),e=Object(d.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)(!0),c=Object(d.a)(a,2),o=c[0],l=c[1],v=Object(r.useState)(""),b=Object(d.a)(v,2),j=b[0],y=b[1],m=Object(r.useState)(["all"]),T=Object(d.a)(m,2),I=T[0],k=T[1];Object(r.useEffect)((function(){f.a("".concat("/thaibudget65","/data.csv")).then((function(t){l(!1),i(t)}))}),[]);var R=Object(r.useMemo)((function(){return n.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{AMOUNT:parseFloat(t.AMOUNT.replace(/,/g,"")),OUTPUT_PROJECT:t.OUTPUT+t.PROJECT,MINISTRY:t.MINISTRY.replace(/\([0-9]+\)$/,"").trim()})})).filter((function(t){return 2022===+t.FISCAL_YEAR})).filter((function(t){return function(t,e){var n=["MINISTRY","BUDGETARY_UNIT"];for(var i in n)if(t[n[i]].includes(e))return!0;return!1}(t,j)}))}),[n,j]),w=Object(h.e)(),C=Object(h.d)();return Object(r.useEffect)((function(){var t=w.pathname.split("/").slice(2);console.log("f",t,t.length>0&&t[0]?t:["all"]),k(t.length>0&&t[0]?t:["all"])}),[w]),Object(p.jsxs)(g,{children:[Object(p.jsxs)("div",{style:{height:60,display:"flex",alignItems:"center",paddingLeft:16,paddingRight:16,overflowX:"auto"},children:[Object(p.jsx)("div",{style:{flexGrow:1,display:"flex",alignItems:"center"},children:I.map((function(t,e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("button",{type:"button",onClick:function(){return function(t,e){console.log(t,e);var n=Object(s.a)(I);n.splice(e+1),console.log("temp",n),C.push("".concat("/thaibudget65","/").concat(n.join("/")))}(t,e)},style:{marginRight:4,backgroundColor:"transparent",border:"none",color:"white"},children:[Object(p.jsx)("span",{style:{opacity:"0.4"},children:e>0&&x[e-1]}),e>0&&Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{textDecoration:e<I.length-1?"underline":"none"},children:0===e?""===j?"\u0e2b\u0e19\u0e48\u0e27\u0e22\u0e07\u0e32\u0e19\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14":'\u0e2b\u0e19\u0e48\u0e27\u0e22\u0e07\u0e32\u0e19\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e17\u0e35\u0e48\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e35\u0e04\u0e33\u0e27\u0e48\u0e32 "'.concat(j,'"'):t})]}),e<I.length-1&&Object(p.jsx)("span",{style:{color:"white",marginRight:4},children:">"})]})}))}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Filter: "}),Object(p.jsx)("input",{value:j,onInput:function(t){return y(t.target.value)},placeholder:"\u0e2b\u0e19\u0e48\u0e27\u0e22\u0e23\u0e31\u0e1a\u0e07\u0e1a\u0e2b\u0e23\u0e37\u0e2d\u0e01\u0e23\u0e30\u0e17\u0e23\u0e27\u0e07"})]})]}),Object(p.jsx)("div",{style:{position:"relative",flexGrow:1},children:Object(p.jsx)(O,{data:R,isLoading:o,filters:I,hierarchyBy:x,setFilters:k})}),Object(p.jsxs)("div",{style:{padding:16,paddingTop:8,fontSize:12,opacity:"0.7",display:"flex"},children:[Object(p.jsx)("div",{style:{position:"relative",flexGrow:1},children:"**Work-In-Progress** \u0e42\u0e04\u0e23\u0e07\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e1b\u0e35 65"}),Object(p.jsxs)("div",{children:["Visualization by"," ",Object(p.jsx)("a",{href:"https://taepras.com",style:{color:"white"},children:"Thanawit Prasongpongchai"}),", \xadData Source:"," ",Object(p.jsx)("a",{href:"https://docs.google.com/spreadsheets/d/1yyWXSTbq3CD_gNxks-krcSBzbszv3c_2Nq54lckoQ24/edit#gid=343539850",style:{color:"white"},children:"\u0e01\u0e25\u0e38\u0e48\u0e21\u0e01\u0e49\u0e32\u0e27 Geek"})]})]})]})},m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(l.a,{children:Object(p.jsx)(y,{})})}),document.getElementById("root")),m()}},[[153,1,2]]]);
//# sourceMappingURL=main.2c09ec3c.chunk.js.map