(this.webpackJsonpthaibudget65=this.webpackJsonpthaibudget65||[]).push([[0],{115:function(t,e,n){},116:function(t,e,n){},119:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(27),a=n.n(o),i=(n(115),n.p,n(116),n(12)),u=n(20),l=n(13),s=n(7),f=n(29),b=n(28),d=n(1);var v=function(){var t=Object(b.a)({onResize:function(t){var e=t.observe,n=t.unobserve;t.w,t.h,t.entr;n(),e()}}),e=t.observe,n=(t.unobserve,t.width),c=t.height,o=(t.entry,Object(r.useRef)(null)),a=Object(r.useState)(["MINISTRY","BUDGETARY_UNIT","BUDGET_PLAN","OUPUT","PROJECT","CATEGORY_LV1","CATEGORY_LV2","CATEGORY_LV3","CATEGORY_LV4","CATEGORY_LV5","CATEGORY_LV6"]),v=Object(l.a)(a,2),O=v[0],j=(v[1],Object(r.useState)(["all"])),p=Object(l.a)(j,2),g=p[0],h=p[1],x=Object(r.useState)([]),y=Object(l.a)(x,2),m=y[0],T=y[1],k=Object(r.useMemo)((function(){return m.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{AMOUNT:parseFloat(t.AMOUNT.replace(/,/g,""))})}))}),[m]),A=Object(r.useMemo)((function(){console.log("filters",g);var t=Object(f.a)(),e=function(e){t=t.key((function(t){return t[O[e]]}))};for(var n in g)e(n);var r={key:"root",values:[{key:"all",values:t.rollup((function(t){return s.d(t,(function(t){return t.AMOUNT}))})).entries(k)}]},c=function(t){var e,n;r=null===(e=(n=r.values).filter)||void 0===e?void 0:e.call(n,(function(e){return e.key===g[t]}))[0]};for(var o in g)c(o);return r}),[k,g,O]);return Object(r.useEffect)((function(){s.a("/thaibudget65/data.csv").then((function(t){T(t)}))}),[]),Object(r.useEffect)((function(){if(o.current){console.log("nested",A);var t=s.b(A,(function(t){return t.values})).sum((function(t){return t.value})).sort((function(t,e){return e.value-t.value})),e=s.e().size([n,c]).padding(1).round(!0)(t);console.log("nodes",e);var r=s.c(o.current).selectAll("g.treemap-piece").data(t.leaves()),a=r.enter().append("g").attr("class","treemap-piece");a.append("rect").style("stroke","black").style("fill","slateblue"),a.append("text").attr("class","text-name").attr("font-size","15px").attr("fill","white"),a.append("text").attr("class","text-value").attr("font-size","12px").attr("fill","white");var u=a.merge(r);u.on("click",null).on("click",(function(t,e){console.log("data",e),console.log("old filter",g),console.log("new filter",[].concat(Object(i.a)(g),[e.data.key])),h([].concat(Object(i.a)(g),[e.data.key]))})).transition().duration(500).attr("transform",(function(t){return"translate(".concat(t.x0,",").concat(t.y0,")")})),u.select("rect").transition().duration(500).attr("width",(function(t){return t.x1-t.x0})).attr("height",(function(t){return t.y1-t.y0})),u.select("text.text-name").transition().duration(500).attr("x",(function(t){return 5})).attr("y",(function(t){return 20})).text((function(t){return t.data.key})),u.select("text.text-value").transition().duration(500).attr("x",(function(t){return 5})).attr("y",(function(t){return 40})).text((function(t){return t.value.toLocaleString()})),r.exit().remove()}}),[o,A,g,n,c]),Object(d.jsxs)("div",{ref:e,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[Object(d.jsx)("div",{style:{height:50},children:g.map((function(t,e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{type:"button",onClick:function(){return function(t,e){console.log(t,e);var n=Object(i.a)(g);n.splice(e+1),h(n),console.log("temp",n)}(t,e)},children:t})})}))}),Object(d.jsx)("svg",{ref:o,width:n,height:c-50})]})};var O=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(v,{})})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),c(t),o(t),a(t)}))};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(O,{})}),document.getElementById("root")),j()}},[[119,1,2]]]);
//# sourceMappingURL=main.351baeaf.chunk.js.map